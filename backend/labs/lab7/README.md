# Лабораторна робота №7: Розгортання програмного забезпечення

## Зміст
1. [Налаштування CI](#1-налаштування-ci)
2. [Налаштування CD](#2-налаштування-cd)
3. [Доступність сервісу](#3-доступність-сервісу)
4. [Висновок](#4-висновок)
5. [Подальші кроки](#5-подальші-кроки)

---

## 1. Налаштування CI

**Ціль:** Автоматична перевірка комітів та Pull Request'ів на відповідність стилю коду, перевірка на помилки, тестування.

### **Інструменти:**
- **Prettier**: для перевірки стилю коду.
- **ESLint**: для пошуку статичних помилок.
- **CommitLint**: провірка стилю опису комітів (стиль Conventional Commits).
- **GitHub Actions**: сервіс для CI.

### **Налаштовані перевірки:**
1. Форматування коду за допомогою Prettier.
2. Лінтинг коду з використанням ESLint.
3. Перевірка опису комітів за допомогою CommitLint.
4. Переконання, що проект "збирається" без помилок.
5. Виконання стаб-файлу тестів (успішно проходить завжди).

### **Файл налаштування GitHub Actions:** [.github/workflows/ci.yml](https://github.com/ваш-репозиторій/.github/workflows/ci.yml)

### **Результат:**
- CI автоматично запускається для кожного Pull Request або коміту.
- Pull Request не може бути змерджений, якщо хоча б одна перевірка не пройдена.

---

## 2. Налаштування CD

**Ціль:** Автоматичне розгортання нової версії проекту на сервері після додавання нових змін до ветки `lab7`.

### **Інструменти:**
- **PM2**: для управління процесами Node.js додатків.
- **GitHub Actions**: для автоматичного розгортання.
- **Nginx**: для проксування запитів на фронтенд і бекенд.

### **Налаштування:**
1. **PM2:**
   - Для фронтенда:
     ```bash
     pm2 start npm --name "frontend-lab7" -- start
     ```
   - Для бекенда:
     ```bash
     pm2 start index.js --name "backend-lab7"
     ```
2. **Nginx:**
   - Налаштований для проксування запитів:
     - **Фронтенд:** `http://prod.lingo-cards.pro`
     - **Бекенд:** `http://api.prod.lingo-cards.pro`
   - Перевірити конфігурацію Nginx:
     ```bash
     sudo nginx -t
     sudo systemctl reload nginx
     ```
3. **GitHub Actions для CD:**
   - Додано файл [deploy.yml](https://github.com/ваш-репозиторій/.github/workflows/deploy.yml), який:
     - Перевіряє код.
     - Підключається до сервера через SSH.
     - Автоматично виконує команду `git pull` і перезапускає додатки через PM2.

### **Результат:**
- Нові зміни автоматично розгортаються на сервері при кожному пуші до гілки `lab7`.

---

## 3. Доступність сервісу

### **Домен:**
- **Frontend:** [http://prod.lingo-cards.pro](http://prod.lingo-cards.pro)
- **Backend API:** [http://api.prod.lingo-cards.pro](http://api.prod.lingo-cards.pro)

### **Додатки працюють на портах:**
- **Frontend:** 3000 (проксування через Nginx).
- **Backend:** 5000 (проксування через Nginx).

### **Перевірка доступності:**
1. За доменами: `curl http://prod.lingo-cards.pro`.
2. API: `curl http://api.prod.lingo-cards.pro`.

---

## 4. Висновок

1. **CI** успішно налаштовано для автоматичної перевірки комітів та Pull Request'ів.
2. **CD** забезпечує автоматичне розгортання змін на сервері.
3. Сервіс доступний за доменами і відповідає вимогам лабораторної роботи.

---

## 5. Подальші кроки

1. Додати HTTPS для захисту сервісу (Let's Encrypt).
2. Оптимізувати конфігурацію Nginx для підвищення продуктивності.
3. Розширити перевірки CI для автоматичного тестування API.

